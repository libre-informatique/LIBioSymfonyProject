

parameters:
    blast:

##############
# SEED BATCH
##############

        Librinfo\SeedBatchBundle\Entity\SeedBatch:
            Sonata\AdminBundle\Show\ShowMapper:
                forceTabs: true
                add:
                    form_group_general:
                        '':
                            code:
                                label: librinfo.label.seed_batch_code
                            seedFarm: ~
                            variety:
                                admin_code: librinfo_varieties.admin.variety
                            producer:
                                admin_code: librinfo_seedbatch.admin.organism
                                associated_property: producerToString
                            productionYear: ~
                            batchNumber: ~
                            plot:
                                admin_code: librinfo_seedbatch.admin.plot
                        form_group_germination_rate:
                            germinationRate: ~
                            germinationDate: ~
                        form_group_tkw:
                            tkw: ~
                            tkwDate: ~
                    form_tab_stocks:
                        form_group_delivery:
                            deliveryDate: ~
                            deliveryNote: ~
                            grossProducerWeight: ~
                            grossDeliveredWeight: ~
                            netScreenedWeight: ~
                            toScreenWeight: ~
                    _options:
                        tabsOrder:
                            - form_group_general
                            - form_tab_stocks
                            - form_group_specifics

            Sonata\AdminBundle\Form\FormMapper:
                remove: 
                    description: ~
                add:
                    form_group_general:
                        '':
                            code:
                                type: librinfo_entitycode
                                label: librinfo.label.seed_batch_code
                            seedFarm:
                                type: sonata_type_model_autocomplete
                                property: [name, code]
                                by_reference: false
                            variety:
                                type: sonata_type_model_autocomplete
#                                route: { name: searchable_admin_retrieve_autocomplete_items }
                                by_reference: false
                                property: name
                                _options:
                                    admin_code: librinfo_varieties.admin.variety
                                    translation_domain: messages
                            producer:
                                type: sonata_type_model_autocomplete
                                by_reference: false
                                property: name
                                callback: [Librinfo\SeedBatchBundle\Admin\OrganismAdminConcrete, producerAutocompleteCallback]
                                _options:
                                    admin_code: librinfo_seedbatch.admin.organism
                            productionYear: ~
                            batchNumber: ~
                            plot:
                                type: sonata_type_model_autocomplete
                                property: [name, code, producer.name]  # TODO: producer.name has no effect, WHY ???
                                by_reference: false
                                to_string_callback: Librinfo\SeedBatchBundle\Admin\PlotAdmin::autocompleteToString
                                _options:
                                    admin_code: librinfo_seedbatch.admin.plot
                            description: ~
                        form_group_germination_rate:
                            germinationRate: ~
                            germinationDate: ~
                        form_group_tkw:
                            tkw: ~
                            tkwDate: ~
                    form_tab_stocks:
                        form_group_delivery:
                            deliveryDate: ~
                            deliveryNote: ~
                            grossProducerWeight: ~
                            grossDeliveredWeight: ~
                            netScreenedWeight: ~
                            toScreenWeight: ~
                    _options:
                        tabsOrder:
                            - form_group_general
                            - form_tab_stocks
                            - form_group_specifics

            Sonata\AdminBundle\Datagrid\ListMapper:
                remove:
                    createdAt: ~
                add:
                    code:
                        identifier: true
                        label: librinfo.label.seed_batch_code
                    seedFarm: ~
                    variety:
                        admin_code: librinfo_varieties.admin.variety
                    producer:
                        admin_code: librinfo_seedbatch.admin.organism
                    productionYear: ~

            Sonata\AdminBundle\Datagrid\DatagridMapper:
                add:
                    code:
                        label: librinfo.label.seed_batch_code
                    seedFarm.name: ~
                    producer.name: ~

#######################
# SEED BATCH EMBEDDED
#######################

        Librinfo\SeedBatchBundle\Admin\SeedBatchEmbeddedAdmin:
            Sonata\AdminBundle\Show\ShowMapper:
                add: ~
            Sonata\AdminBundle\Form\FormMapper:
                remove: ['*']
                add:
                    '':
                        form_group_seedbatch:
                            code:
                                label: librinfo.label.seed_batch_code
                            variety:
                                _options:
                                    admin_code: librinfo_varieties.admin.variety
                            producer:
                                type: sonata_type_model_autocomplete
#                                route: { name: searchable_admin_retrieve_autocomplete_items }
                                by_reference: false
                                property: name # not used but required
                                _options:
                                    admin_code: librinfo_seedbatch.admin.organism
                            productionYear: ~
                            batchNumber: ~
                            plot:
                                _options:
                                    admin_code: librinfo_seedbatch.admin.plot_embedded
            Sonata\AdminBundle\Datagrid\ListMapper:
                add: ~
            Sonata\AdminBundle\Datagrid\DatagridMapper:
                add: ~


########
# PLOT
########

        Librinfo\SeedBatchBundle\Entity\Plot:
            Sonata\AdminBundle\Show\ShowMapper:
                forceTabs: true
                remove: 
                    vcard_uid: ~
                add:
                    form_group_general:
                        '':
                            code: ~
                            producer:
                                admin_code: librinfo_seedbatch.admin.organism
                            certifications: ~
            Sonata\AdminBundle\Form\FormMapper:
                remove:
                    name: ~
                    vcard_uid: ~
                add:
                    form_group_general:
                        '':
                            name:
                                label: librinfo.label.plot_name
                            code:
                                type: librinfo_entitycode
                            producer:
                                type: sonata_type_model
                                _options:
                                    admin_code: librinfo_seedbatch.admin.seed_producer
                            certifications:
                                type: sonata_type_model
                                multiple: true
                    _options:
                        tabsOrder: [form_group_general, form_group_specifics]

            Sonata\AdminBundle\Datagrid\ListMapper:
                remove: 
                    name: ~
                    createdAt: ~
                    zip: ~
                    country: ~
                add:
                    name:
                        identifier: true
                    code: ~
                    producer:
                        admin_code: librinfo_seedbatch.admin.organism
                    city: ~
                    _options:
                        fieldsOrder: [name, code, producer, city]

            Sonata\AdminBundle\Datagrid\DatagridMapper:
                add:
                    code: ~
                    name: ~
                    producer.name: ~

##################
# PLOT (EMBEDDED)
##################

        Librinfo\SeedBatchBundle\Admin\PlotEmbeddedAdmin:
            Sonata\AdminBundle\Show\ShowMapper:
                add: ~
            Sonata\AdminBundle\Form\FormMapper:
                remove:
                    name: ~
                    vcard_uid: ~
                    description: ~
                    address: ~
                    zip: ~
                    city: ~
                    country: ~
                    createdBy: ~
                    createdAt: ~
                    updatedAt: ~
                    updatedBy: ~
                    npai: ~
                add:
                    '':
                        form_group_plot:
                            name:
                                label: librinfo.label.plot_name
                            code: ~
                            description: ~
                            address: ~
                            zip: ~
                            city: ~
                            country: ~
            Sonata\AdminBundle\Datagrid\ListMapper:
                add: ~
            Sonata\AdminBundle\Datagrid\DatagridMapper:
                add: ~

#############
# SEED FARM
#############

        Librinfo\SeedBatchBundle\Entity\SeedFarm:
            Sonata\AdminBundle\Show\ShowMapper:
                forceTabs: true
                remove:
                    vcard_uid: ~
                add:
                    form_group_general:
                        '':
                            code: ~
                        _options:
                            groupsOrder: ['', form_group_description, form_group_main_address]

            Sonata\AdminBundle\Form\FormMapper:
                remove:
                    name: ~
                    vcard_uid: ~
                add:
                    form_group_general:
                        '':
                            name: ~
                            code:
                                type: librinfo_entitycode
                        _options:
                            groupsOrder: ['', form_group_description, form_group_main_address]

            Sonata\AdminBundle\Datagrid\ListMapper:
                remove: 
                    createdAt: ~
                    zip: ~
                    country: ~
                    city: ~
                add:
                    name:
                        identifier: true
                    code: ~
                    _options:
                        fieldsOrder: [name, code]

            Sonata\AdminBundle\Datagrid\DatagridMapper:
                add:
                    code: ~
                    name: ~
                    _options:
                        fieldsOrder: [name, code]


############
# ORGANISM
############

        Librinfo\SeedBatchBundle\Admin\OrganismAdminConcrete:
            Sonata\AdminBundle\Show\ShowMapper:
                add:
                    show_tab_plots:
                        '':
                            plots:
                                admin_code: librinfo_seedbatch.admin.plot_embedded
                    show_tab_seedbatches:
                        '':
                            seedBatches:
                                admin_code: librinfo_seedbatch.admin.seedbatch_embedded
                    _options:
                        tabsOrder:
                            - form_group_general
                            - form_tab_info
                            - form_group_contacts
                            - show_tab_plots
                            - show_tab_seedbatches
                            - show_tab_emails
                            - default

            Sonata\AdminBundle\Form\FormMapper:
                add:
                    form_group_general:
                        form_group_organism:
                            seedProducer:
                                type: checkbox
                                required: false
                            seedProducerCode:
                                type: librinfo_entitycode
                                attr:
                                    placeholder: librinfo.placeholder.seed_producer_code
                            _options:
                                fieldsOrder:
                                    - active
                                    - title
                                    - firstname
                                    - name
                                    - customer
                                    - customerCode
                                    - supplier
                                    - supplierCode
                                    - seedProducer
                                    - seedProducerCode
                                    - circles
                                    - category
                                    - alert
                                    - description
                                    - administrativeNumber
                                    - email
                                    - emailNpai
                                    - emailNoNewsletter
                                    - url
                    form_tab_plots:
                        '':
                            plots:
                                type: sonata_type_collection
                                by_reference: false
                                type_options:
                                    required: true
                                    btn_add: false
                                required: true
                                label: false
                                only_not_new: true
                                _options:
                                    edit: inline
                                    allow_delete: true
                                    admin_code: librinfo_seedbatch.admin.plot_embedded
                    form_tab_seedbatches:
                        '':
                            seedBatches:
                                type: sonata_type_collection
                                by_reference: false
                                type_options:
                                    required: true
                                    btn_add: false
                                required: true
                                label: false
                                only_not_new: true
                                _options:
                                    edit: inline
                                    allow_delete: true
                                    admin_code: librinfo_seedbatch.admin.seedbatch_embedded
                    _options:
                        tabsOrder:
                            - form_group_general
                            - form_tab_info
                            - form_group_contacts
                            - form_tab_plots
                            - form_tab_seedbatches
                            - form_group_specifics

            Sonata\AdminBundle\Datagrid\ListMapper:
                add: ~
            Sonata\AdminBundle\Datagrid\DatagridMapper:
                add: ~
###############                
# Certification
###############

        Librinfo\SeedBatchBundle\Entity\Certification:
            # SHOW
            Sonata\AdminBundle\Show\ShowMapper:
                remove:
                    name: ~
                    description: ~
                add:
                    main_tab:
                        main_group:
                            name: ~
                            code: ~
                            description: ~
                            certificationDate:
                                type: sonata_type_datepicker
                            expiryDate: ~
                    _options:
                        tabsOrder: [main_tab, form_group_specifics]
    
            # FORM    
            Sonata\AdminBundle\Form\FormMapper:
                add:
                    main_tab:
                        main_group:
                            certificationType:
                                type: sonata_type_model
                            certificationDate:
                                type: sonata_type_date_picker
                                required: true
                            expiryDate:
                                type: sonata_type_date_picker
                    _options:
                        tabsOrder: [main_tab, form_group_specifics]
    
            # LIST    
            Sonata\AdminBundle\Datagrid\ListMapper:
                add:
                    description: ~
                    certificationDate: ~
                    expiryDate: ~
    
                    _actions:
                        show: ~
                        edit: ~
                        delete: ~
                        duplicate:
                            template: BlastCoreBundle:CRUD:list__action_duplicate.html.twig
            # FILTERS 
            Sonata\AdminBundle\Datagrid\DatagridMapper:
                add: 
                    certificationDate: ~
                    expiryDate: ~

####################               
# Certification type
####################

        Librinfo\SeedBatchBundle\Entity\CertificationType:
            # SHOW
            Sonata\AdminBundle\Show\ShowMapper:
                remove:
                    name: ~
                    description: ~
                add:
                    main_tab:
                        main_group:
                            name: ~
                            code: ~
                            logo: ~
                            description: ~
                    _options:
                        tabsOrder: [main_tab, form_group_specifics]
            # FORM    
            Sonata\AdminBundle\Form\FormMapper:
                remove:
                    name: ~
                    description: ~
                add:
                    main_tab:
                        main_group:
                            name:
                                required: true
                            code:
                                required: true
                            logo:
                                type: librinfo_dropzone
                                required: false
                            description:
                                type: textarea
                                required: false
                    _options:
                        tabsOrder: [main_tab, form_group_specifics]
            # LIST    
            Sonata\AdminBundle\Datagrid\ListMapper:
                add:
                    name: ~
                    code: ~
                    logo: ~
                    description: ~
    
                    _actions:
                        show: ~
                        edit: ~
                        delete: ~
                        duplicate:
                            template: BlastCoreBundle:CRUD:list__action_duplicate.html.twig
            # FILTERS 
            Sonata\AdminBundle\Datagrid\DatagridMapper:
                add:
                    name: ~
                    code: ~
                    description: ~
    
